!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.util=b()}(this,function(){var a,b={"&":"amp","<":"lt",">":"gt",'"':"quot"},c=0;return String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*.*?\s*$/g,"")}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0;c<this.length;c++)a.call(b,this[c],c,this)}),Object.keys||(Object.keys=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c}),Object.create||(Object.create=function(a){function b(){}return b.prototype=a,new b}),Function.prototype.bind||(Function.prototype.bind=function(a,b){var c,d=this;return b=Array.prototype.slice.call(arguments,1),c=function(){return d.apply(null===a||void 0===a?this:a,b.concat(Array.prototype.slice.call(arguments)))},c.unbind=function(){var e=d;return a=b=d=c=null,e},c}),a={typeOf:function(a){var b;if(void 0===a)return"undefined";if(null===a)return"null";if(Array.isArray(a))return"array";if(a instanceof RegExp)return"regexp";if(b=(typeof a||"object").toLowerCase(),"object"===b){if(a instanceof Number)return"number";if(a instanceof String)return"string";if(a instanceof Boolean)return"boolean"}return b},template:function(){function b(a,b,h){return e=b||g,d=h||g,a.replace(f,c)}function c(b,c){var f,g=d;if(g.prefix){if(c.substring(0,g.prefix.length)!==g.prefix)return b;c=c.substring(g.prefix.length)}return(f=a.delve(e,c))?("{"!==b.charAt(2)&&(f=a.htmlEntities(f)),f):(g.empty!==!1&&(b=g.empty||""),b)}var d,e,f=/\{\{\{?([^{}]+)\}?\}\}/gi,g={};return b}(),memoize:function(a,b,c){var d;if("function"!=typeof a)throw new Error("util.memoize(func, mem) :: Error - first argument must be a function.");return b=b||{},c=c||{},d=function(d){var e;return d+="",c.caseInsensitive===!0&&(d=d.toLowerCase()),b.hasOwnProperty(d)?b[d]:(e=a.apply(this,arguments),b[d]=e,e)},d.unmemoize=function(){var c=a;return d=a=b=null,c},d},forEach:function(a,b){var c;if(Array.isArray(a))for(c=0;c<a.length&&b.call(a,a[c],c)!==!1;c++);else for(c in a)if(a.hasOwnProperty(c)&&b.call(a,a[c],c)===!1)break;return a},delve:function(a,b,c){var d,e=a;if("this"===b)return a;if("."===b)return a.hasOwnProperty(".")?a["."]:c;if(-1===b.indexOf("."))return a.hasOwnProperty(b)?a[b]:c;for(b=b.replace(/(\.{2,}|\[(['"])([^\.]*?)\1\])/gm,".$2").replace(/(^\.|\.$)/gm,"").split("."),d=0;d<b.length;d++){if(!e||!e.hasOwnProperty(b[d]))return c;e=e[b[d]]}return e},extend:function(b){{var c,d,e,f,g=arguments.length;a.constructor}for(c=1;g>c;c++)if(e=arguments[c],null!==e&&void 0!==e){f=e.constructor===a.constructor;for(d in e)(f||e.hasOwnProperty(d))&&(b[d]=e[d])}return b},inherits:function(b,c){function d(){}var e=b.prototype;d.prototype=c.prototype,b.prototype=new d,a.extend(b.prototype,e,{constructor:b,__super:c})},htmlEntities:function(a){var c,d=a.split("");for(c=d.length;c--;)b.hasOwnProperty(d[c])&&(d[c]="&"+b[d[c]]+";");return d.join("")},uniqueId:function(a){return(a||"")+(++c).toString(36)}},a.foreach=a.forEach,a});